- name: backup CentOS-Base.repo
  copy:
    src: /etc/yum.repos.d/CentOS-Base.repo
    dest: /etc/yum.repos.d/CentOS-Base.repo.backup
    remote_src: yes
    force: no

- name: use aliyun CentOS-Base.repo
  get_url:
    url: "{{ base_repo }}"
    dest: /etc/yum.repos.d/CentOS-Base.repo

- name: use aliyun epel.repo
  get_url:
    url: "{{ epel_repo }}"
    dest: /etc/yum.repos.d/epel.repo

- name: yum update
  yum:
    name: "*"
    state: latest

- name: install firewalld
  yum:
    name: firewalld
    state: present

- name: start and enable firewalld
  systemd:
    name: firewalld
    state: started
    enabled: yes
